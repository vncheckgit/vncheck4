/*!
 * BUILD_DATE: 2024-02-27 14:31:56
 *
 */(()=>{"use strict";var t={};function e(t){try{var e=t.split(";");if(1===e.length){var i=e[0].split("-");if(1===parseInt(i[0]))return!0}}catch(t){return!1}return!1}function i(t){const e=t.match(/\d+/g);if(e&&e.length>0){return{firstNumber:parseInt(e[0]),lastNumber:parseInt(e[e.length-1])}}return{firstNumber:0,lastNumber:0}}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var n=function(){var t={};if((e=window.location.search)&&e.length>1)for(var e,i=(e=e.substring(1)).split("&"),n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");t[o[0]]=void 0===o[1]?"":o[1]}return t};function o(t){var e,i=window.location.origin,n=window.location.pathname,o=window.location.href;return o.indexOf("mobile")>-1?(e=(e=o.removeStartFrom("/mobile/")).removeStartFrom("/articles/"),e+="/files/shot.jpg"):(n.indexOf("index.html")>-1&&(n=n.replace("index.html","")),e=i+n+"files/shot.jpg"),console.log("shotUrl",e),e=e.replace("preload.html","")}var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB9SURBVHgBnVGJCcAgDNTQQdpRnEacSJymozSTSLliJKQKrQEfcnfxDp37WR5bKeXCWWsNKSXWhJzzTkQn7jHGgxT2ACAMyL23yWQBmiigr8gMTrc0mMbyqpDFqp/4FQtsc+kMn2rNkiVLQNuDiGYAVhNicv8LneEV0IjW6gbiUmMzhd2y/wAAAABJRU5ErkJggg==";function s(t,e,i){var n=window,o=!1,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.onload=a.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(a.onload=a.onreadystatechange=null,null!=e&&e(a))},a.onerror=function(){null!=i&&i(a)};var s=$("head");return s.find("script").each((function(){this.src==t&&(o=!0)})),o?null!=e&&e(a):(s[0].appendChild(a),a.src=t),a}function r(t,e,i){var n=window,o=!1,a=document.createElement("link");a.rel="stylesheet",a.async=!0,a.onload=a.onreadystatechange=function(){n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(a.onload=a.onreadystatechange=null,null!=e&&e(a))},a.onerror=function(){null!=i&&i(a)};var s=$("head");return s.find("link").each((function(){this.href==t&&(o=!0)})),o?null!=e&&e(a):(s[0].appendChild(a),a.href=t),a}function c(t,e){for(const i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])}var p=window.location.href.includes("bookcase");class d{constructor(){return d.instance||(this.container=document.createElement("div"),c(this.container,{zIndex:"9999999",position:"fixed",top:"35px",left:"50%",transform:"translate(-50%)"}),document.body.appendChild(this.container),d.instance=this),d.instance}show(t,e=1200){const i=document.createElement("div");c(i,{marginBottom:"10px",backgroundColor:"rgba(205,226,250,0.35)",color:"#fff",padding:"10px",borderRadius:"10px",fontSize:"14px"}),i.innerText=t,this.container.appendChild(i),setTimeout((()=>{this.container.removeChild(i)}),e)}}const h=class{constructor(t,e){try{this.isEncryptionBook=null==e||e;const{bookId:i=0,bookcaseId:n=0,uLink:o=""}=t;this.bookId=i,this.bookcaseId=n,this.uLink=o,this.options=t,this.formData=t.action.formData,this.formField=t.action.formData.formField,this.type=parseInt(t.action.type),this.wechat=t.wechat,this.display=t.display||{},this.page=t.action.formData.action.page,this.mask=null,this.form=null,this.dialog=null,this.dialogContent=null,this.visible=!1,this.saveInputInfo=null,this.saveInfo=null,this.nowTime=0,this.expireTime=0,this.isLoading=!0,this.sending=!1,this.beforeInit()}catch(t){console.log(t)}}beforeInit(){p||(e(this.page)||$("#page1")&&$("#page1").css({filter:"blur(4px)"}),this.checkLang());this.init()}checkLang(){var e=this;try{t.g.selectedLanguage&&0!=t.g.selectedLanguage.length?this.isLoading=!1:(this.initLoading(),window.BookEvent&&BookEvent.bindEvent("selectedLanguage",(function(){e.isLoading=!1,e.onLoad()})))}catch(t){}}onLoad(){this.stopLoading()}init(){this.initHtml(),this.initEvents(),this.initAction(),p?this.onLoad():(BookRestrict.fillBooks("flipBook"),BookRestrict.fillBooks("singlePageBook"),BookRestrict.fillBooks("catalogBook"),BookRestrict.fillBooks("slideBook"),BookRestrict.fillBooks("singleSlideBook"))}initCss(){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",restrictCssUrl),document.body.appendChild(t)}initHtml(){if(this.$background=$("<div class='encription_background'></div>"),this.$container=$("<div class='encription_container'></div>"),this.$container.append(this.$background),window.head&&this.$container.append($(window.head)),window.foot&&this.$container.append($(window.foot)),this.formData.tips){var t=void 0!==(i=this.formData.tips)&&i?(i=i.toString()).replaceAll("&amp;","&").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&#92;","\\").replaceAll("&quot;",/"/g).replaceAll("&#39;",/'/g):"",e=$("<div class='encription_tips'>"+t+"</div>");this.tips=e,this.$container.append(e)}var i;$("body").append(this.$container)}initLoading(){this.$content=$("<div class='encription_content'></div>"),this.$loading=$('<div class=\'encription_loading\' >\n        <svg class="circular" width="50" height="50" viewBox="25 25 50 50">\n          <circle class="path" cx="50" cy="50" r="20" fill="none"></circle>\n        </svg>\n      </div>'),this.$content.append(this.$loading)}stopLoading(){this.$content&&this.$content.remove()}initEvents(){var t=this;this.$button&&(this.$button[0].onclick=t=>this.commitEvent(t)),this.$background[0].onclick=function(e){e.stopPropagation(),t.formData.action.page&&"0"!==t.page&&t.hide()},window.BookEvent&&BookEvent.bindEvent("changeLanguage",(function(){t.changeLanguage()}))}changeLanguage(){}commitEvent(t,e){var i=this;if(t&&t.stopPropagation&&t.stopPropagation(),!i.sending){var n=i.getPostData();if(n){var o=window.location.host;i.sending=!0,i.beforeCommit();var a=i.formField.commit.tokenUrl.replace("{{host_name}}",o);$.ajax({url:a,type:"post",dataType:"json",data:n,success:function(t){const{data:n={},code:o=""}=t;if("OK"==o){i.sending=!1;const{code:t=""}=n,e=t;e?i.commitSuccess(e,n):(i.showTipsBox(getLanguage("commitSuccessPrompt","提交成功")),i.applySuccess())}else i.sending=!1,i.commitError(t),e&&e()},error:function(){i.sending=!1,i.showTipsBox(getLanguage("leaveMsgErrorPrompt","出现异常，请稍后重试")),e&&e()}})}}}beforeCommit(){}applySuccess(){}commitSuccess(t,e){if(window.renderArticleById&&(isPhone()||isPad()))return setRestrictToken(t),void renderArticleById();p?(this.setRestrictToken(t),window.initBookCase(e)):(BookRestrict.setRestrictToken(t),this.fillContent(),$("#page1")&&$("#page1").css({filter:"initial"})),this.hide()}commitError(){}fillContent(){this.isEncryptionBook=!1,BookRestrict.fillBookContent()}setRestrictToken(t){try{if(!window.bcSetInfo.isEncryption)return"";if(!window.bcSetInfo.bookcaseLink)return"";var e=(new Date).format("yyyy-MM-dd",!0),i="restrictToken"+window.bcSetInfo.bookcaseLink+e;window.localStorage.setItem(i,t)}catch(t){}}getPostData(){return null}initAction(){switch(this.formData.action.type){case"click_button":this.clickButton();break;case"visit":this.visit();break;case"gotopage":this.gotopage();break;case"page_before":This.pageBefore();break;case"page_after":this.pageAfter();break;case"page_range":case"page_preview":this.pageRange()}}pageAfter(){BUILD_DATE=2021060400;var t=this;if(parseInt(BUILD_DATE)>=2021060401)BookEvent.bindEvent("flipPage",(function(e,i,n,o){n.split("-").indexOf(t.formData.action.page+"")>0&&(t.visible||t.show())})),BookEvent.bindEvent("beforeFlipPage",(function(e){if(Math.min.apply(null,t.getPages(e))>parseInt(t.formData.action.page)&&0==submitted&&0!==Math.min.apply(null,t.getPages(e)))return t.visible||t.show(),0==t.formData.skip?{paused:!0}:{paused:!1}}));else{var e=gotoPageFun;1==this.formData.skip?gotoPageFun=function(i,n,o){Math.min.apply(null,t.getPages(i))>parseInt(t.formData.action.page)&&0==submitted&&(t.visible||t.show()),e.apply(this,Array.prototype.slice.call(arguments,0))}:gotoPageFun=function(i,n,o){Math.min.apply(null,t.getPages(i))>parseInt(t.formData.action.page)&&0!==Math.min.apply(null,t.getPages(i))&&0==submitted?t.visible||t.show():e.apply(this,Array.prototype.slice.call(arguments,0))}}}pageBefore(){var t=this,e=gotoPageFun;1==this.formData.skip?gotoPageFun=function(i,n,o){Math.max.apply(null,t.getPages(i))<parseInt(t.formData.action.page)&&0==submitted&&(t.visible||t.show()),e.apply(this,Array.prototype.slice.call(arguments,0))}:gotoPageFun=function(i,n,o){Math.max.apply(null,t.getPages(i))<parseInt(t.formData.action.page)&&0==submitted?t.visible||t.show():e.apply(this,Array.prototype.slice.call(arguments,0))}}gotopage(){var t=this;if(parseInt(BUILD_DATE)>=2021060401){var e=gotoPageFun;gotoPageFun=function(i,n,o){t.getPages(i).indexOf(parseInt(t.formData.action.page))>=0&&0==submitted&&(t.visible||t.show()),e.apply(this,Array.prototype.slice.call(arguments,0))},BookEvent.bindEvent("beforeFlipPage",(function(e){if(t.getPages(e).indexOf(parseInt(t.formData.action.page)+1)>=0&&0==submitted)return t.visible||t.show(),0==t.formData.skip?{paused:!0}:{paused:!1}}))}else{e=gotoPageFun;1==this.formData.skip?gotoPageFun=function(i,n,o){t.getPages(i).indexOf(parseInt(t.formData.action.page))>=0&&0==submitted&&(t.visible||t.show()),e.apply(this,Array.prototype.slice.call(arguments,0))}:gotoPageFun=function(i,n,o){t.getPages(i).indexOf(parseInt(t.formData.action.page))>=0&&0==submitted?t.visible||t.show():e.apply(this,Array.prototype.slice.call(arguments,0))}}}getPages(t){return!t||t<0?[1]:BookInfo.isDoublePage()?BookInfo.getPagesByIndex(t):[t]}visit(){var t=this;if(1==this.formData.skip)0==submitted&&(this.visible||t.show());else if(0==submitted&&(t.visible||t.show()),this.isBookcase);else if(parseInt(BUILD_DATE)>=2021060401)BookEvent.bindEvent("beforeFlipPage",(function(e){return 0==submitted?(t.visible||t.show(),{paused:!0}):{paused:!1}}));else{var e=gotoPageFun;gotoPageFun=function(){0!=submitted?e.apply(this,Array.prototype.slice.call(arguments,0)):t.visible||t.show()}}}clickButton(){null==this.formData.action.buttonName||"default"==this.formData.action.buttonName?this.addDialogBtn():this.buttonClick()}buttonClick(){var t=this.formData.action.buttonName;BookEvent.bindEvent("clickButton",function(e,i,n){return i==t&&0==submitted&&0==this.formData.skip?(this.visible||this.show(),{paused:!0}):(1==this.formData.skip&&(this.visible||this.show()),{paused:!1})}.bind(this))}addDialogBtn(){var t=this,e=$('<div class=\'reports\'><img class="dialogBtnImg"  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAmCAYAAACh1knUAAAABHNCSVQICAgIfAhkiAAAAgVJREFUWEftmDFuFEEQRd9H5MAJgBNgC4kUxAkgIgQnSESAREBmO0MiABICCHBECkfgBGCfADgBiAsU+qbaas/O7M6yvWMhU9GOdqf7qf6vP72jiAjWXzuSdudto4lAzLAnaWsIZkqQuTDHQCSptUoRsQfcrdbt7czaQQwwBmYSkAGYj8CWpJ/+fjKQAZh9SZuTgyTMDrBdPFN8OWlHyuZ1ZPxbIK3CrhsLS3fkP8g6krUvqZeWpnXcn46paSXn3EAbMzWnC2RZs0bEeeAhcAvYyPv3AT9pX5Unbd+6zZ41EXEPeAEYpq/8uH8syQelmWoCkhDvRnbQZ5AZmJVBUo6vVSe+A4+ATwl2A3gJXMxrd+ZyV6YWIPX5whAb3U0S1l4pMLuSfN9RtQDxBldyxduSbMyZiggb+EMxcDmZHR2Q+nJ/pNaHP+tkzYWhyYiIS4AlPKxu/rToSP1P8URBxkrj8S6TdSCp5MyfDjWQpjbrN2BzwKxfAMvjWotZHWAGOJeb+LPH9yCvrwOGLRC/PD3NxzcNW7d9kddt2KuSfjQd37JYjqcTs3RmHpB9dbOGWdkj9W4ZXJbFmVGyxRI5Wxx2b4CzJUtqmKYgizSJiDvAe+BMF2ZSkPTTA+B1Bf0ZuPbXL2pWOZlFxBPgecLcl/T2RECyM08z6p/NBNoijY+NW+O3S78Boj51Nk+akhQAAAAASUVORK5CYII=" ></div>');e.bind("click",function(){t.visible||t.show()}.bind(this)),isMobiles&&e.attr("class","reportM"),e.bind("mouseenter",(function(){e.css({opacity:"1"})})),e.bind("mouseleave",(function(){e.css({opacity:"0.75"})})),$("body").append(e)}pageRange(){var t=this;if(window.BookEvent&&BookEvent.bindEvent("flipPage",(function(e,i,n){var o=n;o.indexOf("-")>-1&&(o=o.split("-"));for(var a=0;a<o.length;a++)if(t.isRestrictPage(parseInt(o[a])))return void t.show()})),window.BookEvent&&BookEvent.bindEvent("beforeFlipPage",(function(n){var o=e(t.page);const{lastNumber:a=0}=i(t.page);if(t.isRestrictPage(n)&&o||t.isRestrictPage(n)&&n>a)return t.show(),{paused:!0}})),window.BookEvent&&BookEvent.bindEvent("readArticle",(function(e,i){if(i>0&&t.isRestrictPage(i))return t.show(),{paused:!0}})),window.BookRestrict&&BookRestrict.setRestrictPages(this.formData.action.page),window.BookInfo)for(var n=BookInfo.getCurrentPages(),o=0;o<n.length;o++)if(this.isRestrictPage(n[o]))return void this.show();p&&this.show()}isRestrictPage(t){if(this.isEncryptionBook&&bookConfig.isEncryptionBook&&!(t<=0||t>bookConfig.totalPageCount)){try{for(var e=this.formData.action.page.split(";"),i=0;i<e.length;i++){var n=e[i];if(n.indexOf("-")>=0){var o=n.split("-");if(Number.isBetween(t,parseInt(o[0]),parseInt(o[1])))return!1}else if(t==parseInt(n))return!1}}catch(t){return console.log(t),!0}return!0}}show(){var t=this;this.beforeShow((function(){t.$container&&(t.visible||(t.visible=!0,t.$container.show(),t.$container[0].style.display="flex",t.$background.fadeIn(300),$("body").on("keydown",(function(e){13===e.keyCode&&3!==t.type&&t.commitEvent&&t.commitEvent(e)}))))}),(function(){}))}beforeShow(t,e){t&&t(),e&&e()}onShow(){}onHide(){}hide(){this.$container&&this.visible&&(this.visible=!1,this.$container.fadeOut(250),this.onHide(),$("body").off("keydown"))}getFieldValue(t,e,i){try{return this.formField.fileds[t][e]}catch(t){return console.log(t),i||""}}showTipsBox(t){window.TipsBox?(this._tipsBox||(this._tipsBox=new TipsBox({opacity:1},$("body")),this._tipsBox.background.css({"z-index":1e4,background:"rgba(205,226,250,0.35)",top:"35px",left:"50%",right:"initial",transform:"translate(-50%)",padding:"10px 12px","box-shadow":"0px 6px 40px 0px rgba(3,8,26,0.1)","border-radius":"8px",width:"auto"})),this._tipsBox.setCaption(t),this._tipsBox.showTipsBox()):d?(this._toastBox||(this._toastBox=new d),this._toastBox.show(t)):alert(t)}onChangeToken(t){t?(this.isEncryptionBook=!1,BookRestrict.setRestrictToken(t),BookRestrict.fillBookContent(),$("#page1")&&$("#page1").css({filter:"initial"})):(BookRestrict.setRestrictToken(""),this.isEncryptionBook=!0)}toPreview(){const{firstNumber:t=0}=i(this.page);window.gotoPageFun&&fisrtPage&&window.gotoPageFun(t)}};var l=p?"书橱":"书籍",g="micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i),u=function(){const t=window.location.hostname;return["test2.yunzhan365.com","book.yunzhan365.com"].includes(t)}();const m=class extends h{beforeInit(){if(this.applyName="",this.applyTime="",this.authPhone="",this.authReason="",this.applyPomptText="",this.disableApply=!1,this.refuseApply=!1,this.progress=!1,this.notReader=!1,this.openId=this.checkWechatLoginStatus(),this.openId&&u){const t=t=>{if(t&&(this.setWechatUserInfo(t),t.code))return this.commitSuccess(t.code,t),void(this.visible=!0);super.beforeInit()};this.getWechatInfo(t)}else super.beforeInit()}initHtml(){if(super.initHtml(),this.$container.css({"justify-content":"center",padding:"20px"}),!u||window.self!==window.top)return this.readerLeaveMessageDialog(),this.show(),void(this.visible=!1);g||this.openId&&!this.notReader||this.loginQrcodeDialog(),this.createDialog(),this.bindEvent()}bindEvent(){this.beforeShow=function(t,e=200){let i=null;return function(){clearTimeout(i),i=setTimeout((()=>{t.apply(this,arguments)}),e)}}(this.handleBeforeShow)}handleBeforeShow(t,e){if(u&&window.self===window.top)if(g)if(!this.openId||this.notReader){const i=n();if(i.code){const n=i=>{i?(this.setWechatUserInfo(i),i.code?this.commitSuccess(i.code,i):(super.beforeShow(t,e),this.changeInfo(),this.$readContainer.show())):this.redirectWechatUri()};this.getWechatToken(i.code,n)}else this.redirectWechatUri()}else super.beforeShow(t,e),this.$readContainer.show();else if(!this.openId||this.notReader){const i=t=>{t&&(this.setWechatUserInfo(t),this.notReader=!1,this.$wechatContainer&&this.$wechatContainer.hide(),t.code?this.commitSuccess(t.code,t):(this.changeInfo(),this.$readContainer&&this.$readContainer.show()))};super.beforeShow(t,e),this.$wechatContainer.css({display:"flex"}),this.getWechatLoginStatus(i)}else super.beforeShow(t,e),this.changeInfo(),this.$readContainer.show();else super.beforeShow(t,e)}hasPowerCase(){}onHide(){this.progress=!1}readerLeaveMessageDialog(){var t=$('<div class="encription_wechatReasons_limit"></div>'),e=window.self!==window.top?getLanguage("incompatibleConfigurationTitle",`因环境不兼容，此${l}暂时无法阅读`):getLanguage("incompatibleEnvironmentTitle",`因配置不兼容，此${l}暂时无法阅读`),i=window.self!==window.top?getLanguage("incompatibleConfigurationPrompt","微信授权阅读功能与嵌入网页环境不兼容"):getLanguage("incompatibleEnvironmentPrompt",`微信一对一授权无法与${l}自定义域名共存`),n=$('<div class="encription_wechatReasons_limit_title">'+e+"</div>"),o=$('<div class="encription_wechatReasons_limit_desc">'+i+"</div>");this.$limitPannel=t,this.thumbnailElment(),t.append(n),t.append(o),this.$container.append(t),this.leaveMessageButton(),this.leaveMessageDialog()}thumbnailElment(){var t=o(),e=$("\n      <div class='encription_phone_thumbnail'>\n      </div>\n      ");e.css({"background-image":"url("+t+")"}),this.$limitPannel.append(e)}leaveMessageButton(){var t=this,e=getLanguage("leaveMsgToAuthor","给作者留言"),i=$(`<div class="encription_shamStop_button encription_wechatReasons_leave">${e}</div>`);i.on("click",(function(e){e&&e.stopPropagation(),t.$leaveDialog.show()})),this.$limitPannel.append(i)}leaveMessageDialog(){var t=this,e=$('<div class="encription_shamStop_dialog_bg"></div>'),i=$('<div class="encription_shamStop_dialog_row"></div>'),n=$('<div class="encription_shamStop_dialog"></div>'),o=$(`\n        <div class="encription_shamStop_input_cell" >\n          <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgName","姓名")}</div>\n          <input class="encription_shamStop_input encription_shamStop_input_name"/>\n          <div class='encription_shamStop_input_name_msg encription_err_msg' ></div>\n        </div>\n      `),s=$(`\n        <div class="encription_shamStop_input_cell" >\n          <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgContact","联系方式（仅作者可见）")}</div>\n          <input class="encription_shamStop_input encription_shamStop_input_contact" />\n          <div class='encription_shamStop_input_cantact_msg encription_err_msg' ></div>\n        </div>\n      `),r=$(`\n      <div class="encription_shamStop_input_cell" >\n        <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgEnter","请输入留言")}</div>\n        <textarea row="3"class="encription_shamStop_input encription_shamStop_input_leave"></textarea>\n        <div class='encription_shamStop_input_leave_msg encription_err_msg' ></div>\n      </div>\n    `),c=i.clone();c.css({"justify-content":"flex-end"});var p=$(`<div class="encription_shamStop_dialog_button encription_shamStop_dialog_close">${getLanguage("leaveMsgCancel","取消")}</div>`),d=$(`<div class="encription_shamStop_dialog_close_mobile"><img src="${a}"></div>`),h=$(`<div class="encription_shamStop_dialog_button encription_shamStop_dialog_commit">${getLanguage("leaveMsgCommitTitle","提交")}</div>`),g=getLanguage("leaveMsgPrompt",`你的留言将会通过短信等方式通知${l}上传者`),u=$(`<div class="encription_shamStop_dialog_tips">${g}</div>`);e.append(n),n.append(d),n.append(u),n.append(o),n.append(s),n.append(r),c.append(p),c.append(h),n.append(c),this.$leaveDialog=e,this.$leaveDialog.show=function(e){e&&e.stopPropagation(),t.$leaveDialog.css({display:"flex"})},this.$leaveDialog.hide=function(e){e&&e.stopPropagation(),t.$leaveDialog.css({display:"none"})},this.$nameInput=o.find(".encription_shamStop_input_name"),this.$contactInput=s.find(".encription_shamStop_input_contact"),this.$leaveInput=r.find(".encription_shamStop_input_leave"),this.$commitButton=h,this.$itemList=[this.$nameInput,this.$contactInput,this.$leaveInput],p.on("click",this.$leaveDialog.hide),d.on("click",this.$leaveDialog.hide),h.on("click",(t=>{t&&t.stopPropagation(),this.required()||this.commit(t)}));for(let t=0;t<this.$itemList.length;t++)this.$itemList[t].on("input",(()=>{this.$itemList[t].parent().find(".encription_err_msg").html("")}));this.$container.append(e)}required(){let t=!1;for(let e=0;e<this.$itemList.length;e++)this.$itemList[e].val()||(t=!0,this.$itemList[e].parent().find(".encription_err_msg").html(getLanguage("shamStopLeavePrompt","必填项不能为空")));return t}commit(t){var e=this;t.stopPropagation();var i=e.getLeaveMessagePostData();if(i){var n=window.location.host,o=e.formData.message.commit.tokenUrl.replace("{{host_name}}",n),a=getLanguage("leaveMsgErrorPrompt","出现异常，请稍后重试");$.ajax({url:o,type:"post",dataType:"json",data:i,success:function(t){if("OK"==t.code){if(window.renderArticleById&&(isPhone()||isPad()))return void renderArticleById();e.showTipsBox(getLanguage("shamStopLeaveMsgSuccessPrompt","您已成功留言给作者啦！")),e.$leaveDialog.hide()}else e.showTipsBox(a)},error:function(t){e.showTipsBox(a)}})}}checkCommit(){var t=this.getLeaveMessagePostData(),e=$(this.$commitButton);t.name&&t.content&&t.contact?e.removeClass("encription_shamStop_dialog_commit_disabled"):e.addClass("encription_shamStop_dialog_commit_disabled")}getLeaveMessagePostData(){try{var t={name:$(this.$nameInput).val(),contact:$(this.$contactInput).val(),content:$(this.$leaveInput).val()};return this.bookId&&(t.bookId=this.bookId),this.bookcaseId&&(t.bookcaseId=this.bookcaseId),t}catch(t){return null}}loginQrcodeDialog(){var t=$(`\n        <div class='encription_wechatReasons_container'>\n          <div class='encription_wechatReasons_scan' >微信扫码登陆</div>\n          <div class='encription_wechatReasons_codeImg' ></div>\n          <div class='encription_wechatReasons_prompt' >\n            ${isPhone()||isPad()?`<div class='encription_wechatReasons_text' >1.长按二维码图片保存后，在微信打开图片</div>\n                   <div class='encription_wechatReasons_text' >2.长按图片，选择“识别图中的二维码”</div>\n                   <div class='encription_wechatReasons_text' >3.在微信中同意授权用户信息，回到${p?"书橱":"电子书"}</div>`:"<div class='encription_wechatReasons_text' >打开手机微信，扫描二维码</div>"}\n          </div>\n        </div>`);this.$container.append(t),this.$container.css({"justify-content":"center",padding:0});var e=t.find(".encription_wechatReasons_codeImg");e.qrcode({width:180,height:180,text:this.wechat.link});var i=e.find("canvas")[0],n=document.createElement("canvas");n.width=i.width+32,n.height=i.height+32;var o=n.getContext("2d");o.fillStyle="#fff",o.fillRect(0,0,n.width,n.height),o.drawImage(i,16,16);var a=n.toDataURL("image/png"),s=new Image;s.src=a,e.empty(),e[0].appendChild(s),this.$wechatContainer=t}createDialog(){var t=$(`<div class='encription_wechatReasons_name'>${this.username||"微信用户"}</div>`),e=$(`<img class='encription_wechatReasons_photo' src='${this.photoUrl?this.photoUrl:"data:image/png;base64,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"}'/>`),i=$(`<div class='encription_wechatReasons_input_cell'>\n              <input maxlength="50" class='encription_wechatReasons_input encription_wechatReasons_nameInput' \n              placeholder='${getLanguage("enterYourName","请输入姓名")}' value=${this.applyName}>\n              <div class='encription_wechatReasons_err_msg' ></div>\n            </div>`),n=$(`<div class='encription_wechatReasons_input_cell'>\n              <input maxlength="50" class='encription_wechatReasons_input encription_wechatReasons_phoneInput' placeholder='${getLanguage("enterPhoneNumber","请输入电话")}' value=${this.authPhone}>\n              <div class='encription_wechatReasons_err_msg' ></div>\n           </div>`),o=$(`<div class='encription_wechatReasons_textarea_cell'>\n              <textarea maxlength="50" class='encription_wechatReasons_input encription_wechatReasons_reasonInput' placeholder='${getLanguage("enterTheReason","请输入申请理由")}' >${this.authReason}</textarea>\n              <div class='encription_wechatReasons_err_msg' ></div>\n           </div>`),s=$(`<div class='encription_wechatReasons_title'>${this.display.tips}</div>`),r=$(`<div class='encription_wechatReasons_button'>${getLanguage("applyForVisit","申请访问")}</div>`),c=$(`<div class="encription_wechatReasons_commit_prompt" >${this.applyPomptText}</div>`);this.$close=$(`<div class='encription_wechatReasons_close'><img src='${a}'/></div>`);var p=$("<div class='encription_wechatReasons_readInput'></div>");p.append(e),p.append(t);const{showName:d="",showPhone:h="",showReason:l="",tips:g=""}=this.display;d&&p.append(i),h&&p.append(n),l&&p.append(o),g&&p.append(s),p.append(r),this.formData.action.page&&p.append(this.$close),p.append(c);var u=$(`<div class='encription_wechatReasons_inputContainer encription_wechatReasons_${this.type}'></div>`);u.append(p),this.$name=t,this.$photo=e,this.$nameInput=$(i.find(".encription_wechatReasons_input")),this.$phoneInput=$(n.find(".encription_wechatReasons_input")),this.$reasonInput=$(o.find(".encription_wechatReasons_input")),this.$nameInputMsg=$(i.find(".encription_wechatReasons_err_msg")),this.$phoneInputMsg=$(n.find(".encription_wechatReasons_err_msg")),this.$reasonInputMsg=$(o.find(".encription_wechatReasons_err_msg")),this.disableApply&&r.addClass("encription_wechatReasons_button_disable"),this.refuseApply&&c.addClass("encription_wechatReasons_refuse_prompt"),this.$button=r,this.$prompt=c,this.$readContainer=u,this.$container.append(u),this.onChange(),this.$button&&(this.$button[0].onclick=t=>this.commitEvent(t))}changeInfo(){this.$name.html(this.username),this.$photo.attr("src",this.photoUrl)}checkWechatLoginStatus(){return window.localStorage.getItem(window.location.hostname+"authorize")||""}getWechatInfo(t){const e={openId:this.openId};this.bookId&&(e.bookId=this.bookId),this.bookcaseId&&(e.bookcaseId=this.bookcaseId),$.ajax({url:checkPowerUrl,type:"post",dataType:"json",data:e,success:e=>{const{code:i="",msg:n="",data:o=""}=e;switch(i){case"OK":case"NOT_WECHAT_ONE2ONE":case"NOT_SUBMIT_APPLY":t&&t(o);break;case"NOT_READER":this.notReader=!0,t&&t();break;case"REFUSE_APPLY":this.applyPomptText=getLanguage("wechatApplyRefusePrompt","申请已被拒绝"),this.refuseApply=!0,t&&t(o);break;case"WAIT_PASS_APPLY":this.disableApply=!0,this.applyPomptText=getLanguage("wechatApplyReviewPrompt","申请已提交，请耐心等待审核结果"),t&&t(o)}},error:t=>{}})}getWechatLoginStatus(t){const e=e=>{t&&t(e)},i=()=>{setTimeout((()=>{this.progress&&this.getProgress(e,i)}),1e3)};this.progress=!0,this.getProgress(e,i)}getProgress(t,e){$.ajax({url:wechatLoginStatus,type:"post",dataType:"json",data:{sessionId:this.wechat.sessionId},success:i=>{const{code:n="",msg:o="",data:a=""}=i;switch(n){case"WAIT_PASS_APPLY":this.disableApply=!0,this.applyPomptText=getLanguage("wechatApplyReviewPrompt","申请已提交，请耐心等待审核结果"),this.setWechatUserInfo(a);break;case"PROGRESS":e&&e();break;case"OK":t&&t(a)}},error:t=>{}})}setWechatUserInfo(t){const{name:e="微信用户",headimgurl:i="",cover:n="",openid:o="",apply_name:a="",apply_time:s=0,auth_phone:r="",auth_reason:c=""}=t||{};if(this.username=e,i&&(this.photoUrl=i),n&&(this.photoUrl=n),this.applyName=a,this.applyTime=s,this.authPhone=r,this.authReason=c,o){this.openId=o;const t=window.location.hostname+"authorize";window.localStorage.setItem(t,o)}}redirectWechatUri(){try{var t=this.wechat.appId,e=window.location.href,i="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t+"&redirect_uri="+(e=(e=e.replace(window.location.search,"")).replace(window.location.hash,""))+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";window.location.href=i}catch(t){console.log(t)}}getWechatToken(t,e){try{const i={code:t,appId:this.wechat.appId};this.bookId&&(i.bookId=this.bookId),this.bookcaseId&&(i.bookcaseId=this.bookcaseId),$.ajax({url:wechatOne2One,type:"post",dataType:"json",data:i,success:t=>{const i=t.code||"";if(i)switch(i){case"OK":e&&e(t.data);break;case"GET_TOKEN_FAILED":e&&e("");default:e&&e("")}else e&&e("")},error:function(t){e&&e("")}})}catch(t){}}applySuccess(){this.refuseApply=!1,this.disableApply=!0,this.$prompt.removeClass("encription_wechatReasons_refuse_prompt"),this.setPrompt(getLanguage("wechatApplyPrompt","申请已提交，请耐心等待审核结果"))}beforeCommit(){this.sending&&this.$button.addClass("encription_wechatReasons_button_disable")}commitError(){this.showTipsBox(getLanguage("leaveMsgErrorPrompt","出现异常，请稍后重试")),this.$button.removeClass("encription_wechatReasons_button_disable")}setPrompt(t){this.$prompt&&this.$prompt.html(t)}onChange(){var t=this;this.$nameInput.on("input propertychange",(function(){t.$nameInputMsg.html()&&t.$nameInputMsg.html("")})),this.$phoneInput.on("input propertychange",(function(){t.$phoneInputMsg.html()&&t.$phoneInputMsg.html("")})),this.$reasonInput.on("input propertychange",(function(){t.$reasonInputMsg.html()&&t.$reasonInputMsg.html("")})),this.$close&&this.$close.on("click",(e=>{e.stopPropagation(),t.formData.action.page&&t.hide()})),this.$readContainer[0].addEventListener("focusin",(t=>{t.target.tagName})),this.$readContainer[0].addEventListener("focusout",(t=>{t.target.tagName}))}getPostData(){if(this.disableApply)return null;const t=$(this.$nameInput).val(),e=$(this.$phoneInput).val(),i=$(this.$reasonInput).val(),n={openId:this.openId};this.bookId&&(n.bookId=this.bookId),this.bookcaseId&&(n.bookcaseId=this.bookcaseId);const{showName:o="",showPhone:a="",showReason:s=""}=this.display;if(o){if(!t)return void this.$nameInputMsg.html(getLanguage("requiredFieldsPrompt","必填项不能为空"));n.name=t}if(a){if(!e)return void this.$phoneInputMsg.html(getLanguage("requiredFieldsPrompt","必填项不能为空"));n.phone=e}if(s){if(!i)return void this.$reasonInputMsg.html(getLanguage("requiredFieldsPrompt","必填项不能为空"));n.reason=i}return n}};const w=class extends h{beforeInit(){if(this.code=function(t){const e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return i?decodeURI(i[2]):null}("code"),this.code){const t=()=>{super.beforeInit()};this.commitEvent(null,t)}else super.beforeInit()}initHtml(){super.initHtml();var t=o(),e=document.title,i=$(`\n      <div class='encription_password_thumbnailContainer'>\n        <div class='container'>\n          <div class='encription_password_thumbnail'></div>\n          <p>${e}</p>\n        </div>\n      </div>"\n    `);i.find(".encription_password_thumbnail").css({"background-image":"url("+t+")"}),this.$inputContainer=$("<div class='encription_password_inputContainer'></div>");const n=$('<div class="encription_phone_devide" ></div>');this.formData.action.page&&!p&&(this.$inputContainer.append(i),this.$inputContainer.append(n)),this.isLoading?this.$inputContainer.append(this.$content):this.initReadInput(),this.$container.prepend(this.$inputContainer)}onLoad(){super.onLoad(),this.initReadInput(),this.$button&&(this.$button[0].onclick=t=>this.commitEvent(t))}initReadInput(){var t=getLanguage("accessRestrictedTitle","书籍设置了阅读权限"),e=getLanguage("enterPasswordPrompt","请输入密码，继续阅读"),i=$(`\n      <div class='encription_password_head'>\n        <div class='encription_password_title' >${t}</div>\n        <div class='encription_password_subtitle' >${e}</div>\n      </div>\n    `),n=$(`\n      <div class='encription_password_input_cell' >\n        <input class='encription_password_input' type='password' placeholder='${getLanguage("enterVisitCode","请输入访问密码")}'/>\n        <div class='encription_password_input_msg encription_err_msg' ></div>\n      </div>\n    `),o=$("<div class='encription_password_button'>"+getLanguage("commiteTitle","确定")+"</div>"),a=$("<div class='encription_password_readInput'></div>");a.append(i),a.append(n),a.append(o),this.$title=i,this.$Input=$(n.find(".encription_password_input")),this.$inputMsg=$(n.find(".encription_password_input_msg")),this.$button=o,this.$inputContainer.append(a),this.onChange()}changeLanguage(){this.$title.find(".encription_password_title").html(getLanguage("accessRestrictedTitle","书籍设置了阅读权限")),this.$title.find(".encription_password_subtitle").html(getLanguage("enterPasswordPrompt","请输入密码，继续阅读")),this.$Input.attr("placeholder",getLanguage("enterVisitCode","请输入访问密码")),this.$button.html(getLanguage("commiteTitle","确定"))}onChange(){var t=this;this.$Input.on("input propertychange",(function(){t.$inputMsg.html()&&t.$inputMsg.html("")}))}getPostData(){var t=this.code?this.code:$(this.$Input).val();if(!t)return null;var e={password:t};return this.bookId&&(e.bookId=this.bookId),this.bookcaseId&&(e.bookcaseId=this.bookcaseId),e}commitError(){if(this.code)this.code="";else{var t=getLanguage("passwordErrorPrompt","密码错误，请重新输入");this.$inputMsg.html(t)}}};const v=class extends h{initHtml(){super.initHtml();var t=this.getFieldValue(0,"qrcodeUrl",""),e=this.formData.title,i=$("<div class='encription_readingCode_title'>"+e+"</div>"),n=$(`<div class='encription_readingCode_qrcode' ><img  src='${t}'/></div>`),o=$("<div class='encription_readingCode_tips'></div>"),a=this.getFieldValue(0,"tip","扫码添加企业微信"),s=(o=$("<div class='encription_readingCode_tips'>"+a+"</div>"),$(`\n    <div class='encription_readingCode_input_cell' >\n      <input class='encription_readingCode_input' placeholder='${getLanguage("enterReadingCode","请输入阅读码")}'/>\n      <div class='encription_readingCode_input_msg encription_err_msg' ></div>\n    </div>\n  `)),r=$("<div class='encription_readingCode_button'>"+getLanguage("commiteTitle","确定")+"</div>"),c=$("<div class='encription_readingCode_readInput'></div>");c.append(i),c.append(n),c.append(o),c.append(s),c.append(r);var p=$("<div class='encription_readingCode_inputContainer'></div>");p.append(c),this.$Input=$(s.find(".encription_readingCode_input")),this.$inputMsg=$(s.find(".encription_readingCode_input_msg")),this.$button=r,this.$container.prepend(p),this.onChange()}changeLanguage(){this.$Input.attr("placeholder",getLanguage("enterReadingCode","请输入阅读码")),this.$button.html(getLanguage("commiteTitle","确定"))}onChange(){var t=this;this.$Input.on("input propertychange",(function(){t.$inputMsg.html()&&t.$inputMsg.html("")}))}getPostData(){var t=$(this.$Input).val();if(!t)return null;var e={code:t};return this.bookId&&(e.bookId=this.bookId),this.bookcaseId&&(e.bookcaseId=this.bookcaseId),e}commitError(){var t=getLanguage("readingCodeErrorPrompt","阅读码错误，请重新输入");this.$inputMsg.html(t)}};const f=class extends h{initHtml(){super.initHtml();var t=o(),e=document.title,i=$(`\n      <div class='encription_phone_thumbnailContainer'>\n        <div class='container'>\n          <div class='encription_phone_thumbnail'></div>\n          <p>${e}</p>\n        </div>\n      </div>"\n    `);i.find(".encription_phone_thumbnail").css({"background-image":"url("+t+")"}),this.$inputContainer=$("<div class='encription_phone_inputContainer'></div>");let n=$('<div class="encription_phone_devide" ></div>');this.formData.action.page&&!p&&(this.$inputContainer.append(i),this.$inputContainer.append(n)),this.isLoading?this.$inputContainer.append(this.$content):this.initReadInput(),this.$container.prepend(this.$inputContainer)}onLoad(){super.onLoad(),this.initReadInput()}initReadInput(){var t=getLanguage("accessRestrictedTitle","书籍设置了阅读权限"),e=getLanguage("getVerificationCodePrompt","请输入手机号进行验证"),i=$(`\n      <div class='encription_phone_head'>\n        <div class='encription_phone_title' >${t}</div>\n        <div class='encription_phone_subtitle' >${e}</div>\n      </div>\n    `),n=$(`\n        <div class='encription_phone_input_cell'>\n          <input class='encription_phone_input' placeholder='${getLanguage("enterPhoneNumber","请输入手机号")}'/>\n          <div class='encription_phone_input_msg encription_err_msg' ></div>\n          <div class='encription_phone_codeTips'>${getLanguage("getVerificationCode","获取验证码")}</div>\n        </div>\n      `),o=$(`\n      <div class='encription_code_input_cell'>\n        <input class='encription_phone_codeInput' placeholder='${getLanguage("enterVerificationCode","请输入验证码")}' />\n        <div class='encription_code_input_msg encription_err_msg' ></div>\n      </div>\n    `),a=$("<div class='encription_phone_button'>"+getLanguage("commiteTitle","确定")+"</div>"),s=$("<div class='encription_phone_readInput'></div>");s.append(i),s.append(n),s.append(o),s.append(a),this.$title=i,this.$Input=$(n.find(".encription_phone_input")),this.$inputMsg=$(n.find(".encription_phone_input_msg")),this.$codeButton=$(n.find(".encription_phone_codeTips")),this.$codeInput=$(o.find(".encription_phone_codeInput")),this.$codeInputMsg=$(o.find(".encription_code_input_msg")),this.$button=a,this.$inputContainer.append(s),this.onChange()}changeLanguage(){this.$title.find(".encription_phone_title").html(getLanguage("accessRestrictedTitle","书籍设置了阅读权限")),this.$title.find(".encription_phone_subtitle").html(getLanguage("getVerificationCodePrompt","请输入手机号进行验证")),this.$Input.attr("placeholder",getLanguage("enterPhoneNumber","请输入手机号")),this.$codeInput.attr("placeholder",getLanguage("enterVerificationCode","请输入验证码")),this.$codeButton.html(getLanguage("getVerificationCode","获取验证码")),this.$button.html(getLanguage("commiteTitle","确定"))}onChange(){var t=this;this.$Input.on("input propertychange",(function(){t.isCountDown||($(this).val()?t.$codeButton.addClass("active"):t.$codeButton.removeClass("active")),t.clearErrorMsg()})),this.$codeInput.on("input propertychange",(function(){t.clearErrorMsg()}));var e=t.formField.commit.codeUrl;this.$codeButton[0].onclick=function(i){if(!t.isCountDown){var n=$(t.$Input).val();if(n){i.stopPropagation(),t.clearErrorMsg(),this.innerHTML=getLanguage("codeSending","发送中");var o={phone:n};t.bookId&&(o.bookId=t.bookId),t.bookcaseId&&(o.bookcaseId=t.bookcaseId),$.ajax({url:e,type:"post",dataType:"json",data:o,success:function(e){switch(e.code){case"OK":t.showTipsBox(getLanguage("sendValidCodeSuccess","验证码发送成功")),t.$codeButton.removeClass("active"),t.countDown();break;case"INVALID_PHONE":t.$inputMsg.html(`${"yunzhan"===ENCRYTION_ENV?getLanguage("invalidPhoneNumber","无效手机号"):getLanguage("invalidEmail","Invalid email. Please try again")}`),t.$codeButton.html(getLanguage("getVerificationCode","获取验证码"));break;case"CODE_SENDING_FREQUENT":t.$inputMsg.html(getLanguage("codeSendingFrequent","频繁操作，请稍后再试")),t.$codeButton.html(getLanguage("getVerificationCode","获取验证码"))}},error:function(e){t.$codeButton.html(getLanguage("getVerificationCode","获取验证码")),t.showTipsBox(getLanguage("leaveMsgErrorPrompt","出现异常，请稍后重试"))}})}}},this.$button&&(this.$button[0].onclick=t=>this.commitEvent(t))}countDown(){if(!this.isCountDown){this.isCountDown=!0,this.count=90;var t=this,e=window.setInterval((function(){t.$codeButton.html(t.count),t.count--,t.count<0&&(window.clearInterval(e),t.isCountDown=!1,t.$codeButton.html(getLanguage("getVerificationCode","获取验证码")),$(t.$Input).val()&&t.$codeButton.addClass("active"))}),1e3)}}clearErrorMsg(){this.$inputMsg.html()&&this.$inputMsg.html(""),this.$codeInputMsg.html()&&this.$codeInputMsg.html("")}getPostData(){var t=$(this.$Input).val();if(!t)return null;var e=$(this.$codeInput).val();if(!e)return null;var i={phone:t,code:e};return this.bookId&&(i.bookId=this.bookId),this.bookcaseId&&(i.bookcaseId=this.bookcaseId),i}commitError(t){t.code,this.$codeInputMsg.html(getLanguage("verificationCodeErrorPrompt","验证码错误，请重新输入"))}};const b=class extends h{initHtml(){try{if(window.readerCenterPanel){const{website:e="",wechat:i={}}=this.options,n={...i,website:e};readerCenterPanel.init(n),t.g.phoneArticlePeriodical&&(t.g.phoneArticlePeriodical.onShow=()=>{t.g.phoneArticlePeriodical.visible?$(window.readerCenterPanel.$panelBox).hide():$(window.readerCenterPanel.$panelBox).show()})}}catch(t){console.log(t)}}show(){try{window.readerCenterPanel&&readerCenterPanel.show()}catch(t){console.log(t)}}hide(){try{window.readerCenterPanel&&readerCenterPanel.hide()}catch(t){console.log(t)}}initEvents(){try{window.readerCenterPanel&&(readerCenterPanel.onChangeToken=this.onChangeToken.bind(this),readerCenterPanel.toPreview=this.toPreview.bind(this))}catch(t){console.log(t)}}};const k=class extends h{initHtml(){super.initHtml();var t=this;this.$inputContainer=$("<div class='encription_shamStop_container'></div>"),this.$inputContainer.on("click",(function(e){e&&e.stopPropagation(),t.hide()})),this.$container.append(this.$inputContainer),$(".encription_background").css({"backdrop-filter":"blur(8px)",background:"rgba(0,0,0,0.6)"}),this.thumbnailElment(),this.contentElment(),2===this.formData.bookStatus&&this.readSimilarBookButton(),"yunzhan"===ENCRYTION_ENV&&(this.leaveMessageButton(),this.leaveMessageDialog()),"yunzhan"===ENCRYTION_ENV&&2===this.formData.bookStatus&&this.expiredRedirectButton(),"fliphtml5"===ENCRYTION_ENV&&updateStyleSheet(".encription_shamStop_container *, .encription_shamStop_title, .encription_shamStop_description",{"font-family":"Inter !important"})}thumbnailElment(){var t=o(),e=$(`\n    <div class='encription_shamStop_thumbnail'>\n      <img src='${t}' />\n    </div>\n    `);this.$content=$("<div class='encription_shamStop_content'></div>");let i=$('<div class="encription_phone_devide" ></div>');this.$content.append(e),this.$content.append(i),this.$inputContainer.append(this.$content)}contentElment(){var t=$('<div class="encription_shamStop_rightPannel"></div>');this.$content.append(t);var e=this.formData.title?this.formData.title:document.title,i=$(`<div class="encription_shamStop_title">${e}</div>`);t.append(i);var n=[getLanguage("shamStopTitle","yunzhan"===ENCRYTION_ENV?"书籍已被系统暂停访问":"The author's account privileges have resulted in book access suspension."),getLanguage("shamStopSubTitle","yunzhan"===ENCRYTION_ENV?"你可以联系作者尽快恢复阅读":"Contact <a target='_blank' href='{%host}/homepage/{%uLink}/' style='text-decoration: underline' >the author</a> for further information.").replace("{%uLink}",this.uLink).replace("{%host}",window.domainPath)],o=$(`<div class="encription_shamStop_description">${n.map((function(t){return`<p>${t}</p>`})).join("")}</div>`);t.append(o),this.$buttons=$('<div class="encription_shamStop_buttons"></div>'),t.append(this.$buttons)}expiredRedirectButton(){var t=getLanguage("expiredRedirectButton","yunzhan"===ENCRYTION_ENV?"制作同款电子画册":"Explore More Books"),e=$(`<div class="encription_shamStop_button encription_shamStop_blue encription_shamStop_expired">${t}</div>`);this.$buttons.append(e),this.$expiredButton=e,this.isQrcodeButtonClicked=!1,e.on("click",(t=>{t?.stopPropagation(),this.isQrcodeButtonClicked=!0,this.showQrcode()})),window.innerWidth>768&&(e.on("mouseenter",(t=>{t?.stopPropagation(),this.isQrcodeButtonClicked||this.showQrcode(),this.isQrcodeButtonClicked=!1})),e.on("mouseleave",(t=>{t&&t.stopPropagation(),this.hideQrcode()})))}showQrcode(){this.isQrcodeVisible||(this.isQrcodeVisible=!0,this.$qrcodeDialog?this.$qrcodeDialog.show():this.expiredRedirectQrcode())}hideQrcode(){this.$qrcodeDialog&&(this.isQrcodeVisible=!1,this.$qrcodeDialog.hide())}expiredRedirectQrcode(){var t=$('\n    <div class="encription_shamStop_qrcode_cell" >\n    <div class="encription_shamStop_qrcode_bg" ></div>\n      <div class="encription_shamStop_qrcode" >\n        <div>扫码添加福利官，领取体验版会员</div>\n        <img src="/resourceFiles/expiredRedirect/qrcode/wechatQrcode.png" />\n      </div>\n    </div>');if(this.$qrcodeDialog=t,this.$container.append(t),window.innerWidth>768){var e=this.$expiredButton.offset();this.$qrcodeDialog.css({top:e.top,left:e.left+this.$expiredButton.outerWidth()})}this.$qrcodeBg=t.find(".encription_shamStop_qrcode_bg"),this.$qrcodeBg.on("click",(t=>{t&&t.stopPropagation(),this.hideQrcode()}))}readSimilarBookButton(){var t=getLanguage("leaveMsgSimilarBooks","yunzhan"===ENCRYTION_ENV?"阅读相似的书":"Explore More Books"),e=$(`<div class="encription_shamStop_button encription_shamStop_similar">${t}</div>`);e.on("click",(function(t){t&&t.stopPropagation();const e="yunzhan"===ENCRYTION_ENV?"https://www.yunzhan365.com/explore/":`https://fliphtml5.com/exploring/?utm_source=expiredbook&utm_medium=button&utm_campaign=paid&utm_term=${location.pathname.replace(/(\/)(?!.*\1)/,"")}`;window.parent?window.parent.location.href=e:location.href=e})),this.$buttons.append(e)}leaveMessageButton(){var t=this,e=getLanguage("leaveMsgToAuthor","给作者留言"),i=$(`<div class="encription_shamStop_button encription_shamStop_leave encription_shamStop_blue">${e}</div>`);i.on("click",(function(e){e&&e.stopPropagation(),t.$leaveDialog.show()})),this.$buttons.append(i)}leaveMessageDialog(){var t=this,e=$('<div class="encription_shamStop_dialog_bg"></div>'),i=$('<div class="encription_shamStop_dialog_row"></div>'),n=$('<div class="encription_shamStop_dialog"></div>'),o=$(`\n      <div class="encription_shamStop_input_cell" >\n        <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgName","姓名")}</div>\n        <input class="encription_shamStop_input encription_shamStop_input_name"/>\n        <div class='encription_shamStop_input_name_msg encription_err_msg' ></div>\n      </div>\n    `),s=$(`\n      <div class="encription_shamStop_input_cell" >\n        <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgContact","联系方式（仅作者可见）")}</div>\n        <input class="encription_shamStop_input encription_shamStop_input_contact" />\n        <div class='encription_shamStop_input_cantact_msg encription_err_msg' ></div>\n      </div>\n    `),r=$(`\n    <div class="encription_shamStop_input_cell" >\n      <div class="encription_shamStop_input_label" >${getLanguage("leaveMsgEnter","请输入留言")}</div>\n      <textarea row="3"class="encription_shamStop_input encription_shamStop_input_leave"></textarea>\n      <div class='encription_shamStop_input_leave_msg encription_err_msg' ></div>\n    </div>\n  `),c=i.clone();c.css({"justify-content":"flex-end"});var p=$(`<div class="encription_shamStop_dialog_button encription_shamStop_dialog_close">${getLanguage("leaveMsgCancel","取消")}</div>`),d=$(`<div class="encription_shamStop_dialog_close_mobile"><img src="${a}"></div>`),h=$(`<div class="encription_shamStop_dialog_button encription_shamStop_dialog_commit">${getLanguage("leaveMsgCommitTitle","提交")}</div>`),l=getLanguage("leaveMsgPrompt","你的留言将会通过短信等方式通知书籍上传者"),g=$(`<div class="encription_shamStop_dialog_tips">${l}</div>`);e.append(n),n.append(d),n.append(g),n.append(o),n.append(s),n.append(r),c.append(p),c.append(h),n.append(c),this.$leaveDialog=e,this.$leaveDialog.show=function(e){e&&e.stopPropagation(),t.$leaveDialog.css({display:"flex"})},this.$leaveDialog.hide=function(e){e&&e.stopPropagation(),t.$leaveDialog.css({display:"none"})},this.$nameInput=o.find(".encription_shamStop_input_name"),this.$contactInput=s.find(".encription_shamStop_input_contact"),this.$leaveInput=r.find(".encription_shamStop_input_leave"),this.$commitButton=h,this.$itemList=[this.$nameInput,this.$contactInput,this.$leaveInput],p.on("click",this.$leaveDialog.hide),d.on("click",this.$leaveDialog.hide),h.on("click",(t=>{t&&t.stopPropagation(),this.required()||this.commit(t)}));for(let t=0;t<this.$itemList.length;t++)this.$itemList[t].on("input",(()=>{this.$itemList[t].parent().find(".encription_err_msg").html("")}));this.$container.append(e)}required(){let t=!1;for(let e=0;e<this.$itemList.length;e++)this.$itemList[e].val()||(t=!0,this.$itemList[e].parent().find(".encription_err_msg").html(getLanguage("shamStopLeavePrompt","必填项不能为空")));return t}commit(t){var e=this;t.stopPropagation();var i=e.getPostData();if(i){var n=window.location.host,o=e.formField.commit.tokenUrl.replace("{{host_name}}",n),a=getLanguage("leaveMsgErrorPrompt","出现异常，请稍后重试");$.ajax({url:o,type:"post",dataType:"json",data:i,success:function(t){if("OK"==t.code){if(window.renderArticleById&&(isPhone()||isPad()))return void renderArticleById();e.showTipsBox(getLanguage("shamStopLeaveMsgSuccessPrompt","您已成功留言给作者啦！")),e.$leaveDialog.hide()}else e.showTipsBox(a)},error:function(t){e.showTipsBox(a)}})}}checkCommit(){var t=this.getPostData(),e=$(this.$commitButton);t.name&&t.content&&t.contact?e.removeClass("encription_shamStop_dialog_commit_disabled"):e.addClass("encription_shamStop_dialog_commit_disabled")}getPostData(){var t=window.bookId;try{return{bookId:t,name:$(this.$nameInput).val(),contact:$(this.$contactInput).val(),content:$(this.$leaveInput).val()}}catch(e){return console.log(e),{bookId:t,name:"",contact:"",content:""}}}};const I=class extends h{initHtml(){try{window.buyBookModule&&buyBookModule.init()}catch(t){console.log(t)}}show(){try{window.buyBookModule&&buyBookModule.showMask()}catch(t){console.log(t)}}hide(){try{window.buyBookModule&&buyBookModule.hideMask()}catch(t){console.log(t)}}initEvents(){try{window.buyBookModule&&(buyBookModule.onChangeToken=this.onChangeToken.bind(this))}catch(t){console.log(t)}}};const A=class extends h{beforeInit(){this.verifyIP((()=>{super.beforeInit()}))}verifyIP(t){var e={};this.bookId&&(e.bookId=this.bookId),this.bookcaseId&&(e.bookcaseId=this.bookcaseId);try{$.ajax({url:this.formField.commit.tokenUrl,type:"post",dataType:"json",data:e,success:e=>{if("OK"==e.code){if(e.data.code)return void this.commitSuccess(e.data.code,e.data);t&&t()}else t&&t()},error:function(e){t&&t()}})}catch(t){}}initHtml(){super.initHtml(),this.$container.css({"justify-content":"center"});var t=$(`<div><img class='encription_ipAccess_photo' src='${this.photoUrl?this.photoUrl:"data: image/png;base64,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"}'/></div>`),e=$(`<div class='encription_ipAccess_name'>作者对${p?"书橱":"书籍"}设置了访问权限</div>`),i=$(`<div class='encription_ipAccess_prompt'>${"设备所在的IP地址没有权限访问"+(p?"这个书橱":"这本书")}</div>`);this.$close=$('<div class=\'encription_ipAccess_close\'> <svg viewBox="0 0 1024 1024" width=1em height=1em  class="encription_ipAccess_close_svg"><path d="M0 930.909091L930.909091 0l93.090909 93.090909-930.909091 930.909091z"></path><path d="M93.090909 0l930.81506 930.909091-93.090909 93.090909-930.909091-930.909091z"></path></svg></div>');var n=$("<div class='encription_ip_Access_content'></div>");n.append(t),n.append(e),n.append(i),this.formData.action.page&&n.append(this.$close),this.$container.append(n),this.$close.on("click",(t=>{t.stopPropagation(),this.formData.action.page&&this.hide()}))}};window.ENCRYTION_ENV="fliphtml5",window.ENCRYTION_MORE=/192\.168|localhost/.test(location.host)?"local":"pro",window.domainName=function(t){let e="www.yunzhan365.com";switch(t){case"yunzhan":e="pro"===ENCRYTION_MORE?"www.yunzhan365.com":"test"===ENCRYTION_MORE?"3test.yunzhan365.com":"dev-a2.yunzhan365.com";break;case"fliphtml5":e="pro"===ENCRYTION_MORE?"fliphtml5.com":"dev.fliphtml5.com";break;case"pubhtml5":e="pro"===ENCRYTION_MORE?"pubhtml5.com":"dev.pubhtml5.com";break;case"anyflip":e="pro"===ENCRYTION_MORE?"anyflip.com":"dev.anyflip.com"}return e}(ENCRYTION_ENV),window.domainPath="yunzhan"===ENCRYTION_ENV?"//"+window.domainName:"https://"+window.domainName,window.bookDomainPath=function(t){let e="//book.yunzhan365.com";switch(t){case"yunzhan":e="pro"===ENCRYTION_MORE?"//book.yunzhan365.com":"//test2.yunzhan365.com";break;case"fliphtml5":e="pro"===ENCRYTION_MORE?"./static-fliphtml5-com":"https://t.flipbuilder.com";break;case"pubhtml5":e="pro"===ENCRYTION_MORE?"https://static.pubhtml5.com":"https://dev.pubhtml5.com";break;case"anyflip":e="pro"===ENCRYTION_MORE?"https://static.anyflip.com":"https://dev.anyflip.com"}return e}(ENCRYTION_ENV);try{jQuery(document).ready((function(){if(p){if(!window.bcSetInfo)return;if(!window.bcSetInfo.isEncryption)return;if(!window.bcSetInfo.bookcaseLink)return;var e=window.domainPath+"/api/bookcase/get-bookcase-permission?bookcaseLink="+window.bcSetInfo.bookcaseLink}else{if(window.bookConfig&&window.bookConfig.OnlyOpenInIframe){if("boolean"==typeof window.bookConfig.OnlyOpenInIframe&&window.self===window.top)return;if("string"==typeof window.bookConfig.OnlyOpenInIframe&&"yes"==window.bookConfig.OnlyOpenInIframe.toLowerCase()&&window.self===window.top)return}if(!bookConfig.isEncryptionBook)return}const i=p?e:window.getEncryptionType;$.ajax({url:i,type:"get",dataType:"json",success:function(e){if("OK"==e.code)try{if(e.data.bookId&&(window.bookId=e.data.bookId),3===parseInt(e.data.action.type)){const t=window.location.href;if(t.includes("bookh")){let e=t.replace("bookh","book");return e.includes("mobile")||e.replace("index.html","mobile/index.html"),window.location.search.includes("nhs")||(e=e.includes("?")?e+"&nhs=1":e+"?nhs=1"),void(window.location.href=e)}return void C(e)}if(7===parseInt(e.data.action.type)){if("yunzhan"===window.ENCRYTION_ENV){try{var i=e.data.wechat.domain||"";if(i&&window.location.host.indexOf("yunzhan365")>-1){var n=window.location.href.split("/");return n[2]=i,n[3]="books",void(window.location.href=n.join("/"))}}catch(t){}return void r(readerStyleLink,(()=>{s(readerSrc,(()=>y(e)))}))}return(e.data.status??1)<=0&&(bookConfig.EnableReportButton=!0,isPad()||isPhone()?bookConfig.EnableReportButton&&(window.toolBar.addReportButton&&window.toolBar.addReportButton(),t.g.reportPanel||(t.g.reportPanel=new PhoneReportPanel(tmpContainer))):bookConfig.EnableReportButton&&!t.g.reportPanel&&(t.g.reportPanel=new ReportPanel(tmpContainer))),void r(R,(()=>{s(T,(()=>{r(L,(()=>{s(M,(()=>{y(e)}))}))}))}))}if(10===parseInt(e.data.action.type))return void C(e);y(e)}catch(t){console.log(t)}},error:function(t){console.log(t)}})}))}catch(t){}var y=function(t){var e=n();e&&e.code&&t.data.wechat&&t.data.wechat.appId?P(e.code,t.data.wechat.appId,t):_(t)},_=function(t){var e=p?function(){try{if(!window.bcSetInfo.isEncryption)return"";if(!window.bcSetInfo.bookcaseLink)return"";var t=(new Date).format("yyyy-MM-dd",!0),e=window.localStorage.getItem("restrictToken"+window.bcSetInfo.bookcaseLink+t);return e||""}catch(t){}}():BookRestrict.getRestrictToken();e?p?$.ajax({type:"post",url:checkBookcaseTempUrl,dataType:"json",data:{bookcaseId:t.data.bookcaseId,code:e},success:function(e){"OK"==e.code?(console.log("initBookCase",e.data),window.initBookCase(e.data)):C(t)},error:function(){C(t)}}):$.ajax({type:"get",url:restrictUrl,dataType:"json",data:{urls:JSON.stringify([o()]),token:e},success:function(e){"OK"==e.code&&1==e.token_valid?(B(t),!p&&BookRestrict.fillBookContent()):C(t)},error:function(){C(t)}}):S(t)},P=function(t,e,i){try{$.ajax({url:wechatUrl,type:"get",dataType:"json",data:{bookId:window.bookId,code:t,appId:e},success:function(t){if("OK"==t.code)try{var e=t.data.token;window.readerCenterPanel&&window.readerCenterPanel.setLoginToken&&window.readerCenterPanel.setLoginToken(e),window.buyBookModule&&window.buyBookModule.setLoginToken&&window.buyBookModule.setLoginToken(e),S(i)}catch(t){console.log(t)}else _(i)}.bind(this),error:function(t){console.log(t)}})}catch(t){}},C=function(t,e){r(restrictCssUrl,(function(){switch(parseInt(t.data.action.type)){case 0:window.encryptionPannel=new w(t.data);break;case 1:window.encryptionPannel=new f(t.data);break;case 2:window.encryptionPannel=new v(t.data);break;case 3:case 4:case 5:case 6:window.encryptionPannel=new m(t.data);break;case 7:window.encryptionPannel=new b(t.data);break;case 8:bookConfig.appLogoIcon="fliphtml5"===ENCRYTION_ENV?"https://online.fliphtml5.com/booklogo.png":"//book.yunzhan365.com/web/images/logo.png",setTimeout((()=>{bookConfig.appLogoIcon?initLogoBar():$("#logoBar").html("")}),200),window.encryptionPannel=new k(t.data);break;case 9:window.encryptionPannel=new I(t.data);break;case 10:window.encryptionPannel=new A(t.data)}e&&e()}),(function(){}))},B=function(t,e){if(7===parseInt(t.data.action.type))window.encryptionPannel=new b(t.data,!1);e&&e()},S=function(t){var e,i=parseInt(t.data.action.type);7==i&&(e=window.readerCenterPanel),9==i&&(e=window.buyBookModule);var n=t.data.token||"";e&&n&&e.setLoginToken&&e.setLoginToken(n),e&&e.getLoginToken&&e.getLoginToken()?$.ajax({url:checkReaderPowerUrl,type:"get",dataType:"json",data:{bookId:window.bookId,token:e.getLoginToken()},success:function(e){if("OK"==e.code)try{e.data&&e.data.code?(p?function(t){try{if(!window.bcSetInfo.isEncryption)return"";if(!window.bcSetInfo.bookcaseLink)return"";var e=(new Date).format("yyyy-MM-dd",!0),i="restrictToken"+window.bcSetInfo.bookcaseLink+e;window.localStorage.setItem(i,t)}catch(t){}}(e.data.code):BookRestrict.setRestrictToken(e.data.code),B(t),!p&&BookRestrict.fillBookContent()):C(t)}catch(e){console.log(e),C(t)}else C(t)},error:function(t){console.log(t)}}):C(t)};window.EncryptionPasswordPannel=w,window.EncryptionReadingCodePannel=v,window.EncryptionPhonePannel=f,window.EncryptionWechatReasonsPannel=m,window.EncryptionPaidPannel=b,window.EncryptionShamStopPannel=k,window.EncryptionPaidAbroadPannel=I,window.EncryptionIPAccessPannel=A,window.showEncryptionPannel=C,window.foot="",window.head="",window.articleUrl=domainPath+"/api/book/access/get-article-config",window.restrictUrl=domainPath+"/api/book/get-temporary-url",window.checkBookcaseTempUrl=domainPath+"/api/bookcase/check-bookcase-temp",window.restrictCssUrl="local"==ENCRYTION_MORE?"encryption/encryption.css":"dev"==ENCRYTION_MORE&&"yunzhan"==window.ENCRYTION_ENV?bookDomainPath+"/resourceFiles/dev_templates/js/encryption/encryption.css?"+(new Date).getTime():bookDomainPath+"/resourceFiles/js/encryption/encryption.css?"+(new Date).getTime(),window.getEncryptionType="local"!==ENCRYTION_MORE?domainPath+"/api/book/access/get-book-permission?link="+window.location.href:"encryption/encryption.json",window.checkReaderPowerUrl=domainPath+"/api/mall/reader/check-reader-power",window.wechatUrl=domainPath+"/api/mall/reader/sign-in-by-code",window.wechatOne2One=domainPath+"/api/wechat/one2one/sign-in-by-code",window.wechatLoginStatus=domainPath+"/api/wechat/one2one/get-status",window.checkPowerUrl=domainPath+"/api/wechat/one2one/check-power";const E=bookDomainPath+"/resourceFiles/js/mall/js",D=bookDomainPath+"/resourceFiles/js/mall/css",T=E+"/chunk-vendors.js",R=D+"/chunk-vendors.css",M=E+"/buy.js",L=D+"/buy.css";window.readerStyleLink=domainPath+"/components-reader/min/reader.css",window.readerSrc=domainPath+"/components-reader/min/reader.js"})();